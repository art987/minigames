<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†æµ‹è¯•ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="site-header">
        <h1>å¿ƒç†æµ‹è¯•ä¸­å¿ƒ</h1>
        <p class="subtitle">å¤šç»´åº¦èƒ½åŠ›æµ‹è¯„å¹³å°ï¼ˆçº¯å‰ç«¯ï¼Œæ— éœ€ç™»å½•ï¼‰</p>
    </header>

    <main class="container">
        <section id="categories-section">
            <h2>æµ‹è¯•åˆ†ç±»</h2>
            <div id="categories-container" class="categories-container">
                <!-- åˆ†ç±»å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>
        
        <section id="tests-section" class="hidden">
            <div class="category-header">
                <button id="back-to-categories" class="back-button">è¿”å›åˆ†ç±»</button>
                <h2 id="current-category">æµ‹è¯•åˆ—è¡¨</h2>
            </div>
            <ul id="test-list" class="test-list"></ul>
        </section>
    </main>

    <footer class="site-footer">
        <p>ç»“æœä¸ä¸Šä¼ æœåŠ¡å™¨ã€‚å¯é€‰æ‹©ä¿å­˜ä¸ºå›¾ç‰‡è‡³æœ¬åœ°ã€‚</p>
    </footer>

    <script src="js/tests.js"></script>
    
    <!-- é¢„åŠ è½½ç¤ºä¾‹æµ‹è¯•æ³¨å†Œè¡¨ï¼ˆä»…åŒ…å«å…ƒæ•°æ®ï¼Œå®é™…é¢˜åº“åœ¨ run.html æŒ‰éœ€åŠ è½½ï¼‰ -->
    <script src="data/iq.js"></script>
    <script src="data/eq.js"></script>
    <script src="data/iq60.js"></script>
    
    <script>
    (function() {
        // å®šä¹‰æµ‹è¯•åˆ†ç±»
        var categories = {
            'psychology': {
                name: 'å¿ƒç†æµ‹è¯•',
                icon: 'ğŸ§ ',
                tests: [],
                description: 'æ¢ç´¢å†…å¿ƒä¸–ç•Œï¼Œäº†è§£è‡ªæˆ‘æ€§æ ¼ç‰¹ç‚¹å’Œå¿ƒç†å€¾å‘çš„æµ‹è¯•é›†åˆ'
            },
            'knowledge': {
                name: 'çŸ¥è¯†æµ‹è¯•',
                icon: 'ğŸ“š',
                tests: [],
                description: 'æ£€éªŒå„é¢†åŸŸçŸ¥è¯†å‚¨å¤‡ï¼Œä»å†å²åˆ°ç§‘å­¦ï¼Œå…¨æ–¹ä½æŒ‘æˆ˜ä½ çš„çŸ¥è¯†é¢'
            },
            'iq': {
                name: 'æ™ºåŠ›æµ‹è¯•',
                icon: 'ğŸ’¡',
                tests: [],
                description: 'é€šè¿‡é€»è¾‘æ¨ç†å’Œæ¨¡å¼è¯†åˆ«ï¼Œè¯„ä¼°æ€ç»´èƒ½åŠ›å’Œè§£å†³é—®é¢˜çš„æ™ºåŠ›æ°´å¹³'
            },
            'eq': {
                name: 'æƒ…å•†æµ‹è¯•',
                icon: 'â¤ï¸',
                tests: [],
                description: 'æµ‹é‡æƒ…ç»ªè¯†åˆ«å’Œäººé™…äº¤å¾€èƒ½åŠ›ï¼Œæå‡ç¤¾äº¤å…³ç³»å’Œè‡ªæˆ‘æƒ…ç»ªç®¡ç†'
            },
            'personality': {
                name: 'æ€§æ ¼æµ‹è¯•',
                icon: 'ğŸ”',
                tests: [],
                description: 'æ­ç¤ºä½ çš„æ€§æ ¼ç‰¹è´¨å’Œè¡Œä¸ºæ¨¡å¼ï¼Œå¸®åŠ©æ›´å¥½åœ°è®¤è¯†è‡ªå·±çš„ä¼˜åŠ¿å’Œç‰¹ç‚¹'
            },
            'career': {
                name: 'èŒä¸šå€¾å‘',
                icon: 'ğŸ’¼',
                tests: [],
                description: 'åˆ†æä½ çš„èŒä¸šå…´è¶£å’Œèƒ½åŠ›ç‰¹ç‚¹ï¼Œæ‰¾åˆ°æœ€é€‚åˆçš„èŒä¸šå‘å±•æ–¹å‘'
            }
        };
        
        // æ ¹æ®IDåˆ†é…æµ‹è¯•åˆ°ä¸åŒåˆ†ç±»
        function categorizeTests(tests) {
            tests.forEach(function(test) {
                if (test.id.includes('iq')) {
                    categories.iq.tests.push(test);
                } else if (test.id.includes('eq')) {
                    categories.eq.tests.push(test);
                } else {
                    categories.psychology.tests.push(test);
                }
                
                // æ·»åŠ é¢˜ç›®æ•°é‡å±æ€§
                if (!test.questionCount) {
                    // é»˜è®¤é¢˜ç›®æ•°é‡ï¼Œå®é™…åº”ä»æ•°æ®ä¸­è·å–
                    test.questionCount = test.id === 'iq60' ? 60 : 10;
                }
            });
        }
        
        // æ¸²æŸ“åˆ†ç±»åˆ—è¡¨
        function renderCategories() {
            var container = document.getElementById('categories-container');
            
            Object.keys(categories).forEach(function(key) {
                // æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»ï¼Œå³ä½¿æ²¡æœ‰æµ‹è¯•é¡¹ç›®
                var category = categories[key];
                var card = document.createElement('div');
                card.className = 'category-card';
                card.dataset.category = key;
                
                var icon = document.createElement('div');
                icon.className = 'category-icon';
                icon.textContent = category.icon;
                
                var content = document.createElement('div');
                content.className = 'category-content';
                
                var title = document.createElement('h3');
                title.textContent = category.name;
                
                var desc = document.createElement('p');
                desc.className = 'category-desc';
                desc.textContent = category.description;
                
                var count = document.createElement('p');
                count.className = 'category-count';
                count.textContent = (category.tests.length > 0) ? 
                    category.tests.length + 'ä¸ªæµ‹è¯•' : 
                    'å³å°†æ¨å‡º';
                
                content.appendChild(title);
                content.appendChild(desc);
                content.appendChild(count);
                
                card.appendChild(icon);
                card.appendChild(content);
                container.appendChild(card);
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                card.addEventListener('click', function() {
                    showTestsForCategory(key);
                });
            });
        }
        
        // æ˜¾ç¤ºç‰¹å®šåˆ†ç±»çš„æµ‹è¯•
        function showTestsForCategory(categoryKey) {
            document.getElementById('categories-section').classList.add('hidden');
            document.getElementById('tests-section').classList.remove('hidden');
            document.getElementById('current-category').textContent = categories[categoryKey].name;
            
            renderTestList(categories[categoryKey].tests);
        }
        
        // æ¸²æŸ“æµ‹è¯•åˆ—è¡¨
        function renderTestList(tests) {
            var list = document.getElementById('test-list');
            list.innerHTML = '';
            
            if (!tests.length) {
                var li = document.createElement('li');
                li.textContent = 'è¯¥åˆ†ç±»æš‚æ— æµ‹è¯•';
                list.appendChild(li);
                return;
            }
            
            tests.forEach(function(item) {
                var li = document.createElement('li');
                var a = document.createElement('a');
                a.href = 'run.html?test=' + encodeURIComponent(item.id);
                
                var titleSpan = document.createElement('span');
                titleSpan.className = 'test-title';
                titleSpan.textContent = item.title;
                
                var infoSpan = document.createElement('span');
                infoSpan.className = 'test-info';
                infoSpan.textContent = item.questionCount + 'é¢˜ Â· çº¦' + item.estimateMinutes + 'åˆ†é’Ÿ';
                
                a.appendChild(titleSpan);
                a.appendChild(infoSpan);
                li.appendChild(a);
                
                var p = document.createElement('p');
                p.className = 'desc';
                p.textContent = item.description;
                li.appendChild(p);
                list.appendChild(li);
            });
        }
        
        // è¿”å›åˆ†ç±»é¡µé¢
        document.getElementById('back-to-categories').addEventListener('click', function() {
            document.getElementById('tests-section').classList.add('hidden');
            document.getElementById('categories-section').classList.remove('hidden');
        });
        
        // åˆå§‹åŒ–
        var all = window.TestRegistry ? window.TestRegistry.list() : [];
        categorizeTests(all);
        renderCategories();
    })();
    </script>
</body>
</html>



