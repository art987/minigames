<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童安全教育备忘录</title>
    <link rel="stylesheet" href="https://peacelove.top/menu.css">
    <link rel="stylesheet" href="styles.css">
	
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=tCF5EpUw"></script>
    <script src="data-ertonganquan.js" defer></script>
    <script src="script.js" defer></script>
</head>
<body style="   background: url(biaoyangbg.png) no-repeat top center;">
 <div id="navbar-container"></div>

    <div class="title">
        <h1 id="title-h1"></h1>
        <p id="title-p"></p>
    </div>
    <div class="search-container" id="search-container">
        <input type="text" id="search-input" placeholder="输入要表扬的行为或品德...">
        <div class="clear-btn" id="clear-search" style="display: none;">X</div>
    </div>
    <div class="marquee">
        <div class="tip">表扬：</div>
        <div class="keywords" id="keywords-container"></div>
        <button id="show-all-keywords" class="show-all-keywords">全部</button>
    </div>
	<div class="tagsbox" >
		<div class="tip" >分类：</div> 
		<div class="tags" id="tags-container">
		</div>
		<button id="show-all-tags" class="show-all-tags">↹</button>
	</div>
	<div id="floating-tags-container" class="floating-tags"></div>
    <div class="content" id="content-container"></div>
    <div id="keyword-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-modal">&times;</span>
            <div id="modal-keywords-container"></div>
        </div>
    </div>
	<button id="auto-scroll-button">滚动</button>
	  <button id="back-to-top">⇪</button>
	  
<script>
    // 动态加载菜单
    async function loadNavbar() {
        try {
            // 1. 先加载menudata.js
            await loadScript('https://peacelove.top/menudata.js');
            
            // 2. 然后加载menu.html
            const response = await fetch('https://peacelove.top/menu.html');
            const navbarHtml = await response.text();

            // 3. 提取HTML中的脚本内容
            const parser = new DOMParser();
            const doc = parser.parseFromString(navbarHtml, 'text/html');
            const scripts = doc.querySelectorAll('script');
            const scriptContent = [];
            
            scripts.forEach(script => {
                scriptContent.push(script.textContent);
                script.remove(); // 移除原脚本
            });

            // 4. 将HTML插入到页面中
            document.getElementById('navbar-container').innerHTML = doc.body.innerHTML;

            // 5. 动态创建并执行脚本
            scriptContent.forEach(content => {
                const script = document.createElement('script');
                script.textContent = content;
                document.body.appendChild(script);
            });
        } catch (error) {
            console.error('加载横栏条时出错：', error);
        }
    }

    // 辅助函数：动态加载JS文件
    function loadScript(url) {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = url;
            script.onload = resolve;
            script.onerror = reject;
            document.body.appendChild(script);
        });
    }

    // 确保DOM完全加载后再调用loadNavbar
    document.addEventListener('DOMContentLoaded', () => {
        loadNavbar();
    });
</script>
</body>
</html>