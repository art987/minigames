# 高考志愿对冲卡·静态版

> 29.9元扫码，输入位次→1秒出冲/稳/保院校PDF，卖3.4万份=100万，纯静态，无后台。

## 🎯 项目概述

高考志愿对冲卡是一个纯静态网站，为高考考生提供智能志愿填报建议。用户输入省份、科类和全省位次后，系统立即生成包含冲/稳/保各15所院校的PDF志愿卡。

## ✨ 核心功能

- 📱 **响应式设计**：完美适配手机和电脑
- 🎨 **水墨国风界面**：优雅的中国传统美学设计
- ⚡ **即时计算**：基于预置JSON数据的快速院校匹配
- 📄 **PDF生成**：使用html2canvas+jspdf生成可打印志愿卡
- 💳 **Gumroad支付**：嵌入式支付按钮，密钥校验解锁下载
- 📊 **数据分析**：基于5年投档线数据的智能推荐
- 🚀 **静态部署**：Cloudflare Pages零成本抗10万并发

## 🛠️ 技术架构

### 前端技术栈
- **HTML5/CSS3/JavaScript**：原生Web技术
- **水墨国风CSS**：渐变背景+动画效果
- **html2canvas+jspdf**：PDF生成
- **响应式设计**：Flexbox+Grid布局

### 数据处理
- **CSV转JSON**：Node.js脚本处理5年投档线数据
- **位次切片**：每5000位次一个JSON文件（≤30KB）
- **智能匹配**：位次±5000区间院校推荐

### 部署方案
- **Next.js静态导出**：`next export`生成静态文件
- **Cloudflare Pages**：全球CDN，零成本部署
- **Gumroad集成**：支付和密钥管理

## 📁 项目结构

```
zhiyuancard/
├── index.html                 # 主页面
├── styles.css                 # 水墨国风样式
├── script.js                  # 主逻辑脚本
├── package.json               # 项目配置
├── README.md                  # 项目说明
├── data/                      # 数据目录
│   ├── provinces.js           # 省份数据
│   ├── csv/                   # 原始CSV数据
│   └── json/                  # 转换后的JSON数据
└── scripts/                   # 工具脚本
    └── convert-csv-to-json.js # 数据转换脚本
```

## 🚀 快速开始

### 1. 本地开发

```bash
# 克隆项目
git clone <repository-url>
cd zhiyuancard

# 启动本地服务器
python -m http.server 8001
# 或使用Node.js
npx serve . -p 8001

# 访问 http://localhost:8001
```

### 2. 数据准备

```bash
# 安装依赖
npm install

# 转换CSV数据（需要先准备CSV文件）
npm run convert-data

# CSV文件格式示例：
# 省份,科类,院校代码,院校名称,位次,年份
# 北京市,理科,10001,北京大学,9500,2023
# 北京市,理科,10002,清华大学,9800,2023
```

### 3. 生产部署

```bash
# 构建静态文件（如果使用Next.js）
npm run build

# 部署到Cloudflare Pages
# 1. 连接GitHub仓库到Cloudflare Pages
# 2. 设置构建命令: npm run build
# 3. 设置输出目录: out
```

## 💰 支付集成

### Gumroad配置

1. **创建产品**：在Gumroad创建29.9元产品
2. **获取产品ID**：记录产品ID用于嵌入
3. **配置Webhook**：设置密钥验证回调
4. **更新脚本**：修改`script.js`中的产品ID

### 密钥验证流程

```javascript
// 1. 用户输入Gumroad兑换码
// 2. 前端调用Gumroad API验证密钥
// 3. 验证通过后解锁PDF下载功能
// 4. 密钥一次性使用，24小时内有效
```

## 📊 数据架构

### JSON数据结构

```json
{
  "北京市": {
    "理科": {
      "10000": [
        {
          "code": "10001",
          "name": "北京大学", 
          "rank": 9500,
          "year": 2023
        }
      ],
      "20000": [
        // 更多院校数据...
      ]
    }
  }
}
```

### 数据更新流程

1. **收集数据**：每年高考后更新投档线CSV
2. **转换处理**：运行`convert-csv-to-json.js`
3. **部署更新**：上传新的JSON文件到CDN
4. **版本控制**：保留历史数据供参考

## 🎨 设计特色

### 水墨国风元素
- **渐变背景**：仿水墨晕染效果
- **动画效果**：墨水流动动画
- **传统配色**：青蓝渐变+留白设计
- **书法字体**：优雅的中文字体

### 用户体验优化
- **渐进式加载**：数据按需加载
- **错误处理**：友好的错误提示
- **离线支持**：Service Worker缓存
- **性能优化**：图片懒加载+代码分割

## 🔒 安全合规

### 数据安全
- **前端计算**：敏感数据不传输到服务器
- **本地存储**：用户数据仅存储在本地
- **HTTPS加密**：全站强制HTTPS

### 合规声明
- **PDF页脚**："数据仅供参考，最终以考试院官方为准"
- **隐私政策**：明确数据使用范围
- **免责声明**：说明数据局限性

## 📈 统计分析

### Google Analytics
- **页面浏览**：跟踪用户访问行为
- **转化事件**：记录PDF下载次数
- **用户画像**：分析用户特征

### Gumroad数据
- **销售统计**：实时监控销售情况
- **用户反馈**：收集用户评价
- **退款管理**：处理退款请求

## 🚨 故障排除

### 常见问题

**Q: PDF生成失败？**
A: 检查html2canvas和jspdf版本兼容性

**Q: Gumroad密钥验证失败？**
A: 确认产品ID和API配置正确

**Q: 数据加载缓慢？**
A: 优化JSON文件大小，启用CDN缓存

**Q: 移动端显示异常？**
A: 检查响应式CSS和视口设置

### 性能优化建议

1. **压缩资源**：使用Gzip压缩文本文件
2. **缓存策略**：设置合理的缓存头
3. **CDN加速**：使用全球CDN分发静态资源
4. **代码分割**：按需加载JavaScript模块

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发规范
- 遵循ES6+ JavaScript语法
- 使用语义化的Git提交信息
- 保持代码注释清晰
- 测试所有新功能

## 📄 许可证

MIT License - 详见LICENSE文件

## 📞 联系我们

如有问题或建议，请通过以下方式联系：
- 邮箱：your-email@example.com
- GitHub Issues：提交问题报告

---

**免责声明**：本项目提供的数据仅供参考，最终志愿填报请以各省考试院官方信息为准。